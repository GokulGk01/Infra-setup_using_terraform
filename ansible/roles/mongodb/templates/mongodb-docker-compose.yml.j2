version: '3.9'

services:
  mongodb:
    container_name: mongodb
    image: bitnami/mongodb:6.0
    network_mode: {{ docker_network_name }}
    ports:
      - "{{ mongodb_port }}:27017"
    restart: unless-stopped
    environment:
      - ALLOW_EMPTY_PASSWORD=no
      - MONGODB_ROOT_USER={{ mongodb_root_user }}
      - MONGODB_ROOT_PASSWORD={{ mongodb_root_passwd }}
      - MONGODB_USERNAME={{ mongodb_user }}
      - MONGODB_PASSWORD={{ mongodb_user_passwd }}
      - MONGODB_DATABASE={{ mongodb_database }}
    volumes:
      - 'mongodb_data:/bitnami/mongodb'

volumes:
  mongodb_data:
    driver: local
